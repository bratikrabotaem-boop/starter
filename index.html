<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSFiddle Clone</title>
    <style>
        /* --- 1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–±—Ä–æ—Å --- */
        * { box-sizing: border-box; outline: none; }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #1e1e1e; color: #ccc; }

        /* --- 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (Flexbox) --- */
        body { display: flex; flex-direction: column; }

        /* –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é */
        header {
            height: 48px;
            background: #2d2d2d;
            border-bottom: 1px solid #3c3c3c;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            flex-shrink: 0; /* –ß—Ç–æ–±—ã –º–µ–Ω—é –Ω–µ —Å–∂–∏–º–∞–ª–æ—Å—å */
        }

        .logo { font-weight: bold; color: #fff; font-size: 16px; display: flex; align-items: center; gap: 10px; }
        .logo span { background: #007acc; padding: 2px 6px; border-radius: 4px; font-size: 12px; }

        .actions button {
            background: #3c3c3c;
            color: #fff;
            border: 1px solid #555;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 13px;
            border-radius: 3px;
            transition: 0.2s;
            margin-left: 8px;
        }
        .actions button:hover { background: #505050; }
        .actions button.primary { background: #0e639c; border-color: #0e639c; }
        .actions button.primary:hover { background: #1177bb; }

        /* –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—á–∞—è –æ–±–ª–∞—Å—Ç—å */
        main {
            display: flex;
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ */
            height: calc(100vh - 48px);
            position: relative;
        }

        /* --- 3. –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–†–µ–¥–∞–∫—Ç–æ—Ä—ã) --- */
        #editors-panel {
            width: 40%; /* –®–∏—Ä–∏–Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ */
            min-width: 300px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #3c3c3c;
            background: #1e1e1e;
            transition: transform 0.3s ease, width 0.3s ease;
        }
        
        /* –ö–ª–∞—Å—Å –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ */
        #editors-panel.collapsed {
            width: 0;
            min-width: 0;
            overflow: hidden;
            border: none;
        }

        /* –û—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (HTML, CSS, JS) */
        .editor-box {
            flex: 1; /* –í—Å–µ —Ç—Ä–∏ –±–ª–æ–∫–∞ –¥–µ–ª—è—Ç –≤—ã—Å–æ—Ç—É –ø–æ—Ä–æ–≤–Ω—É */
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid #3c3c3c;
            min-height: 0; /* –í–ê–ñ–ù–û –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ –≤–Ω—É—Ç—Ä–∏ flex-—ç–ª–µ–º–µ–Ω—Ç–∞ */
        }
        .editor-box:last-child { border-bottom: none; }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ */
        .editor-label {
            background: #252526;
            padding: 5px 10px;
            font-size: 11px;
            font-weight: bold;
            color: #858585;
            text-transform: uppercase;
            user-select: none;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
        }
        
        /* –¶–≤–µ—Ç–∞ –¥–ª—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ */
        .tag-html { color: #e34c26; }
        .tag-css { color: #563d7c; }
        .tag-js { color: #f1e05a; }

        /* –°–∞–º–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞ */
        textarea {
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –º–µ—Å—Ç–æ –≤ .editor-box */
            width: 100%;
            background: #1e1e1e;
            color: #d4d4d4;
            border: none;
            resize: none; /* –ó–∞–ø—Ä–µ—Ç —Ä–∞—Å—Ç—è–≥–∏–≤–∞–Ω–∏—è –º—ã—à–∫–æ–π, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –≤–µ—Ä—Å—Ç–∫—É */
            padding: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã */
        textarea::-webkit-scrollbar { width: 10px; height: 10px; }
        textarea::-webkit-scrollbar-track { background: #1e1e1e; }
        textarea::-webkit-scrollbar-thumb { background: #424242; border-radius: 5px; }
        textarea::-webkit-scrollbar-thumb:hover { background: #4f4f4f; }

        /* --- 4. –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–†–µ–∑—É–ª—å—Ç–∞—Ç) --- */
        #output-panel {
            flex: 1;
            background: #fff;
            position: relative;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <span>JS</span> WebEditor
        </div>
        <div class="actions">
            <button onclick="toggleEditors()" id="toggleBtn">üëÅ –°–∫—Ä—ã—Ç—å –∫–æ–¥</button>
            <button class="primary" onclick="run()">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
        </div>
    </header>

    <main>
        <div id="editors-panel">
            
            <div class="editor-box">
                <div class="editor-label">HTML <span class="tag-html">‚óè</span></div>
                <textarea id="html" spellcheck="false" placeholder="–ü–∏—à–∏—Ç–µ HTML –∑–¥–µ—Å—å...">
<div class="container">
    <h1>–ü—Ä–∏–≤–µ—Ç!</h1>
    <p>–ò–∑–º–µ–Ω–∏ –º–µ–Ω—è –∏ –Ω–∞–∂–º–∏ "–ó–∞–ø—É—Å—Ç–∏—Ç—å".</p>
    <button id="btn">–ù–∞–∂–º–∏ –º–µ–Ω—è</button>
</div>
                </textarea>
            </div>

            <div class="editor-box">
                <div class="editor-label">CSS <span class="tag-css">‚óè</span></div>
                <textarea id="css" spellcheck="false" placeholder="–ü–∏—à–∏—Ç–µ CSS –∑–¥–µ—Å—å...">
body {
    font-family: sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f4f4f4;
    margin: 0;
}
.container {
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
}
button {
    padding: 10px 20px;
    background: #007acc;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
button:hover { background: #005f9e; }
                </textarea>
            </div>

            <div class="editor-box">
                <div class="editor-label">JavaScript <span class="tag-js">‚óè</span></div>
                <textarea id="js" spellcheck="false" placeholder="–ü–∏—à–∏—Ç–µ JS –∑–¥–µ—Å—å...">
document.getElementById('btn').addEventListener('click', () => {
    alert('–ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!');
    document.querySelector('h1').style.color = 'red';
});
                </textarea>
            </div>

        </div>

        <div id="output-panel">
            <iframe id="preview"></iframe>
        </div>
    </main>

    <script>
        const htmlField = document.getElementById('html');
        const cssField = document.getElementById('css');
        const jsField = document.getElementById('js');
        const previewFrame = document.getElementById('preview');
        const editorsPanel = document.getElementById('editors-panel');
        const toggleBtn = document.getElementById('toggleBtn');

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞
        function run() {
            // –ë–µ—Ä–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
            const html = htmlField.value;
            const css = `<style>${cssField.value}</style>`;
            const js = `<script>${jsField.value}<\/script>`;
            
            // –°–æ–±–∏—Ä–∞–µ–º HTML –¥–ª—è iframe
            // –í–∞–∂–Ω–æ: –¥–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏, —á—Ç–æ–±—ã iframe –Ω–µ –∏–º–µ–ª –æ—Ç—Å—Ç—É–ø–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            const code = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    ${css}
                </head>
                <body>
                    ${html}
                    ${js}
                </body>
                </html>
            `;

            // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ iframe
            const doc = previewFrame.contentWindow.document;
            doc.open();
            doc.write(code);
            doc.close();
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è/–ø–æ–∫–∞–∑–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        function toggleEditors() {
            editorsPanel.classList.toggle('collapsed');
            if (editorsPanel.classList.contains('collapsed')) {
                toggleBtn.innerText = "‚úèÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–¥";
            } else {
                toggleBtn.innerText = "üëÅ –°–∫—Ä—ã—Ç—å –∫–æ–¥";
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à–∏ Tab (—á—Ç–æ–±—ã —Å—Ç–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã, –∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ñ–æ–∫—É—Å)
        const textareas = [htmlField, cssField, jsField];
        textareas.forEach(ta => {
            ta.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = this.selectionStart;
                    const end = this.selectionEnd;
                    // –í—Å—Ç–∞–≤–ª—è–µ–º 2 –ø—Ä–æ–±–µ–ª–∞
                    this.value = this.value.substring(0, start) + "  " + this.value.substring(end);
                    this.selectionStart = this.selectionEnd = start + 2;
                }
            });
        });

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.onload = run;
    </script>

</body>
</html>
